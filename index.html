<!doctype html>
<!--
Copyright 2017-2020 JellyWare Inc. All Rights Reserved.
-->
<html>

  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="BlueJelly">
    <meta name="viewport" content="width=640, maximum-scale=1.0, user-scalable=yes">
    <title>高砂　遠隔制御</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="responsive.css">
    <script type="text/javascript" src="bluejelly.js"></script>
  </head>

  <body>
    <header>
      <div class="container">
        <div class="header-left">
          Takasago Remote-control Center
        </div>
      </div>
    </header>

    <div class="top-wrapper">
      <div class="container">
        <h1>takasago-elec.</h1>
        <p>人と地球にやさしい企業でありたい・・・</p>
        <p>流体制御のソリューションプロバイダー</p>
      </div>
    </div>

    <div class="lesson-wrapper">
      <div class="container">
        <div class="heading">
          <h2>遠隔制御リスト</h2>
        </div>

        <div class="lessons">

          <div class="lesson">
            <div class="lesson-icon">
              <img src="https://cdn.shopify.com/s/files/1/0332/9409/0372/products/rpq2_main_large.jpg?v=1585101604">
              <p>Unit1</p>
            </div>
            <div class="lesson-btn">

              <input id="write_value" class="btn" value="up" size="20">
              <button id="write" class="btn on p1" onclick="cssTest()">ON</button>

              <input id="write_valuee" class="btn" value="down" size="20">
              <button id="writee" class="btn off p1" onclick="cssTestt()">OFF</button>

              <div id="device_name"> </div>
              <div id="uuid_name"> </div>
              <div id="status"> </div>
              <div id="statuss"> </div>
              <div id="statusss"> </div>

            </div>
          </div>

          <div class="lesson">
            <div class="lesson-icon">
              <img src="https://cdn.shopify.com/s/files/1/0332/9409/0372/products/RP-QII_QIII_large.png?v=1588793243">
              <p>Unit2</p>
            </div>
            <div class="lesson-btn">

              <input id="write_value2" class="btn" value="up" size="20">
              <button id="write2" class="btn on p2" onclick="cssTest2()">ON</button>

              <input id="write_valuee2" class="btn" value="down" size="20">
              <button id="writee2" class="btn off p2" onclick="cssTestt2()">OFF</button>

              <div id="device_name2"> </div>
              <div id="uuid_name2"> </div>
              <div id="status2"> </div>
              <div id="statuss2"> </div>

            </div>
          </div>

          <div class="lesson">
            <div class="lesson-icon">
              <img src="https://cdn.shopify.com/s/files/1/0332/9409/0372/products/RP-HX_large.png?v=1588020960">
              <p>Unit3</p>
            </div>
            <div class="lesson-btn">

              <input id="write_value3" class="btn" value="up" size="20">
              <button id="write3" class="btn on p3" onclick="cssTest3()">ON</button>

              <input id="write_valuee3" class="btn" value="down" size="20">
              <button id="writee3" class="btn off p3" onclick="cssTestt3()">OFF</button>

              <div id="device_name3"> </div>
              <div id="uuid_name3"> </div>
              <div id="status3"> </div>
              <div id="statuss3"> </div>

            </div>
          </div>

          <div class="lesson">
            <div class="lesson-icon">
              <img src="https://cdn.shopify.com/s/files/1/0332/9409/0372/products/RP-TX_large.png?v=1588020946">
              <p>Unit4</p>
            </div>
            <div class="lesson-btn">

              <input id="write_value4" class="btn" value="up" size="20">
              <button id="write4" class="btn on p4" onclick="cssTest4()">ON</button>

              <input id="write_valuee4" class="btn" value="down" size="20">
              <button id="writee4" class="btn off p4" onclick="cssTestt4()">OFF</button>

              <div id="device_name4"> </div>
              <div id="uuid_name4"> </div>
              <div id="status4"> </div>
              <div id="statuss4"> </div>

            </div>
          </div>

          <div class="clear"></div>

        </div>
      </div>
    </div>

    <footer>
      <div class="container">
        <a class="hp" href="https://takasago-elec.co.jp/">高砂電気工業株式会社</a>
      </div>
    </footer>


    <script>

    var not = 0;
    function cssTest(){
      not++;
      if (not == 1) {
        document.getElementById("write").classList.toggle("push");
      } else {
        document.getElementById("write").classList.toggle("push");
        document.getElementById("writee").classList.toggle("push");
      }
    }

    function cssTestt(){
      not++;
      if (not == 1) {
        document.getElementById("writee").classList.toggle("push");
      } else {
        document.getElementById("writee").classList.toggle("push");
        document.getElementById("write").classList.toggle("push");
      }
    }

    var not2 = 0;
    function cssTest2(){
      not2++;
      if (not2 == 1) {
        document.getElementById("write2").classList.toggle("push");
      } else {
        document.getElementById("write2").classList.toggle("push");
        document.getElementById("writee2").classList.toggle("push");
      }
    }

    function cssTestt2(){
      not2++;
      if (not2 == 1) {
        document.getElementById("writee2").classList.toggle("push");
      } else {
        document.getElementById("writee2").classList.toggle("push");
        document.getElementById("write2").classList.toggle("push");
      }
    }

    var not3 = 0;
    function cssTest3(){
      not3++;
      if (not3 == 1) {
        document.getElementById("write3").classList.toggle("push");
      } else {
        document.getElementById("write3").classList.toggle("push");
        document.getElementById("writee3").classList.toggle("push");
      }
    }

    function cssTestt3(){
      not3++;
      if (not3 == 1) {
        document.getElementById("writee3").classList.toggle("push");
      } else {
        document.getElementById("writee3").classList.toggle("push");
        document.getElementById("write3").classList.toggle("push");
      }
    }

    var not4 = 0;
    function cssTest4(){
      not4++;
      if (not4 == 1) {
        document.getElementById("write4").classList.toggle("push");
      } else {
        document.getElementById("write4").classList.toggle("push");
        document.getElementById("writee4").classList.toggle("push");
      }
    }

    function cssTestt4(){
      not4++;
      if (not4 == 1) {
        document.getElementById("writee4").classList.toggle("push");
      } else {
        document.getElementById("writee4").classList.toggle("push");
        document.getElementById("write4").classList.toggle("push");
      }
    }

    //--------------------------------------------------
    //Global変数
    //--------------------------------------------------
    //BlueJellyのインスタンス生成
    const ble = new BlueJelly();
    const ble2 = new BlueJelly();
    const ble3 = new BlueJelly();
    const ble4 = new BlueJelly();

    //--------------------------------------------------
    //ロード時の処理
    //--------------------------------------------------
    window.onload = function () {
      //UUIDの設定
      ble.setUUID("UUID1", BlueJelly.MICROBIT_UART_SERVICE, BlueJelly.MICROBIT_RX_CHARACTERISTIC);
      ble2.setUUID("UUID2", BlueJelly.MICROBIT_UART_SERVICE, BlueJelly.MICROBIT_RX_CHARACTERISTIC);
      ble3.setUUID("UUID3", BlueJelly.MICROBIT_UART_SERVICE, BlueJelly.MICROBIT_RX_CHARACTERISTIC);
      ble4.setUUID("UUID4", BlueJelly.MICROBIT_UART_SERVICE, BlueJelly.MICROBIT_RX_CHARACTERISTIC);
    }

    //--------------------------------------------------
    //ConnectGATT後の処理
    //--------------------------------------------------
    ble.onConnectGATT = function (uuid) {
      console.log('> connected GATT!');
      document.getElementById('status').innerHTML = "【○】接続OK!"
    }

    ble2.onConnectGATT = function (uuid) {
      console.log('> connected GATT!');
      document.getElementById('status2').innerHTML = "【○】接続OK!"　
    }

    ble3.onConnectGATT = function (uuid) {
      console.log('> connected GATT!');
      document.getElementById('status3').innerHTML = "【○】接続OK!"
    }

    ble4.onConnectGATT = function (uuid) {
      console.log('> connected GATT!');
      document.getElementById('status4').innerHTML = "【○】接続OK!"
    }

    //--------------------------------------------------
    //Disconnect後の処理
    //--------------------------------------------------

    ble.onDisconnect = function () {
      console.log('> disconnected!');
      document.getElementById('status').innerHTML = "【×】接続切れ"
    }

    ble2.onDisconnect = function () {
      console.log('> disconnected!');
      document.getElementById('status2').innerHTML = "【×】接続切れ"
    }

    ble3.onDisconnect = function () {
      console.log('> disconnected!');
      document.getElementById('status3').innerHTML = "【×】接続切れ"
    }

    ble4.onDisconnect = function () {
      console.log('> disconnected!');
      document.getElementById('status4').innerHTML = "【×】接続切れ"
    }

    //-------------------------------------------------
    //ボタンが押された時のイベント登録
    //--------------------------------------------------
    document.getElementById('write').addEventListener('click', function() {
      //フォーマットに従って値を変換
      const textEncoder = new TextEncoder();
      const text_data = document.getElementById('write_value').value;
      const text_data_encoded = textEncoder.encode(text_data + '\n');
      document.getElementById('statuss').innerHTML = "ON"

      //write
      ble.write('UUID1', text_data_encoded);
    });

    document.getElementById('writee').addEventListener('click', function() {
      //フォーマットに従って値を変換
      const textEncoder = new TextEncoder();
      const text_data = document.getElementById('write_valuee').value;
      const text_data_encoded = textEncoder.encode(text_data + '\n');
      document.getElementById('statuss').innerHTML = "off"

      //write
      ble.write('UUID1', text_data_encoded);
    });

    document.getElementById('write2').addEventListener('click', function() {
      //フォーマットに従って値を変換
      const textEncoder = new TextEncoder();
      const text_data = document.getElementById('write_value2').value;
      const text_data_encoded = textEncoder.encode(text_data + '\n');
      document.getElementById('statuss2').innerHTML = "ON"

      //write
      ble2.write('UUID2', text_data_encoded);
    });

    document.getElementById('writee2').addEventListener('click', function() {
      //フォーマットに従って値を変換
      const textEncoder = new TextEncoder();
      const text_data = document.getElementById('write_valuee2').value;
      const text_data_encoded = textEncoder.encode(text_data + '\n');
      document.getElementById('statuss2').innerHTML = "off"

      //write
      ble2.write('UUID2', text_data_encoded);
    });

    document.getElementById('write3').addEventListener('click', function() {
      //フォーマットに従って値を変換
      const textEncoder = new TextEncoder();
      const text_data = document.getElementById('write_value3').value;
      const text_data_encoded = textEncoder.encode(text_data + '\n');
      document.getElementById('statuss3').innerHTML = "ON"

      //write
      ble3.write('UUID3', text_data_encoded);
    });

    document.getElementById('writee3').addEventListener('click', function() {
      //フォーマットに従って値を変換
      const textEncoder = new TextEncoder();
      const text_data = document.getElementById('write_valuee3').value;
      const text_data_encoded = textEncoder.encode(text_data + '\n');
      document.getElementById('statuss3').innerHTML = "off"

      //write
      ble3.write('UUID3', text_data_encoded);
    });

    document.getElementById('write4').addEventListener('click', function() {
      //フォーマットに従って値を変換
      const textEncoder = new TextEncoder();
      const text_data = document.getElementById('write_value4').value;
      const text_data_encoded = textEncoder.encode(text_data + '\n');
      document.getElementById('statuss4').innerHTML = "ON"

      //write
      ble4.write('UUID4', text_data_encoded);
    });

    document.getElementById('writee4').addEventListener('click', function() {
      //フォーマットに従って値を変換
      const textEncoder = new TextEncoder();
      const text_data = document.getElementById('write_valuee4').value;
      const text_data_encoded = textEncoder.encode(text_data + '\n');
      document.getElementById('statuss4').innerHTML = "off"

      //write
      ble4.write('UUID4', text_data_encoded);
    });

    </script>


  </body>
  
</html>
